I have built a suite of tests for use with the "funkload" tester: http://funkload.nuxeo.org/

============================
Running the Tests - Funkload
============================

Set your proxy environment variable to point to your WT-enabled squid:

  export http_proxy=http://10.10.10.10:3128

To run just one test:

  fl-run-test -d test_whitelist.py whitelist.test_addtowhitelist

To run all the tests:

  fl-run-test -d test_whitelist.py

To benchmark:

  fl-run-bench test_whitelist.py whitelist.test_addtowhitelist

Note that you probably want to limit the stack size if you are going to benchmark, so your box can run up enough threads.  Use "ulimit -s 2048".

To build a fancy report:

  fl-build-report --html whitelist_bench.xml

==============================
Running the Tests - Unit Tests
==============================

Unit tests are also available and can be run by:

python whitetrash_unittesting.py

Currently unit tests are only written for the redirector, tests for whitetrash server will be written soon.

=======
Results
=======

Whitetrash has been shown to scale well, since the code is very small, and the database accesses simple.  Memcached support has been added to support very large scale enterprise deployments.  I hope to be able to test WT on a large scale with memcached in the near future.

======
Django
======

Disable apache caching for testing by putting the following in /etc/apache2/httpd.conf:

    MaxRequestsPerChild 1
