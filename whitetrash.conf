[DEFAULT]

# Used to specify the server that provides our whitetrash form stylesheets.
# Expects a whitetrash_server.css file:  @import "http://wt.blah/whitetrash_server.css";
stylesheet_server="http://whitetrash.sf.net"

# These configuration options have been added to allow you to separate the whitetrash
# functions onto different machines for performance.  This is only necessary for very
# large installations.
# Domain to view whitelist webpages and delete entries
whitetrash_admin_domain="whitetrash"
# Domain to check entries, and add new entries
# This domain should be the same as the common name
# in your ssl certificate
whitetrash_add_domain="whitetrash"
# Domain to generate CAPTCHA images (if installed)
whitetrash_captcha_domain="whitetrash"

# You can enable this option to make whitetrash build an initial whitelist
# by automatically adding every domain it sees.  Note that it could be adding
# malware, so use with caution.  Once an initial list has been built this needs
# to be set to true.  I recommend you review any whitelist created in this way
# before the domains are "blessed" as known good.
auto_add_all_domains="False"

# Should a CAPTCHA (http://en.wikipedia.org/wiki/Captcha) test be applied to stop 
# malware adding itself to the whitelist?
# Note: It would have to be REALLY smart malware for this to be useful.
captcha_ssl="False"
captcha_http="False"

# Are users allowed to delete their own entries in the whitelist?
user_deletion_allowed="True"

# Use memcached for super-fast performance.  Whitelist is cached in RAM
# and distributed across multiple servers.  Note that you should consider
# the security implications of where memcache is running, especially if you run
# it on machines other than the whitetrash server.  Wherever you run it you should 
# protect it to make sure the cache cannot be accessed by any person or program
# other than whitetrash.  Firewall rules and SSH tunnels might be one way to do
# this.
use_memcached="False"

# Comma separated memcached server list.  Read security notes above.
memcache_servers="127.0.0.1:11211"

# When debug is enabled, users see very detailed verbose error messages.
# This should be disabled for the production system for security reasons.
# When debug is false, users get a unique error code and the full details
# are sent to syslog with that code.  Any errors that are meaningful to
# the user but don't disclose security information will still be displayed.
debug="True"

# Comma separated list of usernames who have privileges
# to remove any whitelist entries.  Username format is
# dependent on what auth scheme squid uses.
admins="greg"

# This is used to authenticate the squid proxy to whitetrash
proxy_secret="2kjhshhbs21183mn337b3IIsskh"

# After this number of days without a hit, the whitetrash_cleanup.py script will
# remove the domain from the database.  Note whitetrash_cleanup will have
# to be installed as a cron or run manually
timeout_in_days = 90

# This is how long we try and cache the viewwhitelist page for.
# The idea is to limit the number of times we will do the full select on the
# database.
cache_age_in_seconds=3600

# Whitetrash server SSL certificate
ssl_server_certificate = '/etc/server.pem'

# Database params 
database="whitetrash"
db_unix_socket="/var/run/mysqld/mysqld.sock"
mysql_binary="/usr/bin/mysql"
# Whitetrash web user
database_user="whitetrash_user"
database_password="passwd"
# whitetrash_cleanup.py user
db_cleanup_user="whitetrash_clean"
db_cleanup_passwd="passwd"

# These parameters are used to sanitise user input
# If you change these values, make sure you alter the database table
# Maximum length for domain names
domain_name_length=70
# Max length of username
username_length=50
# Max length of url
url_length=255
# Max length of user comment
comment_length=100

# Whitetrash serves off localhost (assumes it is on same box as squid)
# This provides protection from users being able to contact the server directly
server_address = "127.0.0.1"
server_port = 8000
pidfile = '/var/run/whitetrash_serv.pid'
logfile = '/var/log/whitetrash.log'

# Domain fail indicator for redirectors.  You shouldn't need to change this.
domain_fail_string="invalid_try_again"

#Valid domain regex.  Be very careful about changing this.
# Labels 1-50 chars only a-z, digits and dash.
# 1-6 Labels
# 2-6 char suffix (everything from .uk to .museum)
domain_regex="^([a-z0-9-]{1,50}\.){1,6}[a-z]{2,6}$"
