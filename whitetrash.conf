[DEFAULT]

# Domain to view whitelist webpages, add, and delete entries
whitetrash_domain="whitetrash"

# You can enable this option to make whitetrash build an initial whitelist
# by automatically adding every domain it sees.  Note that it could be adding
# malware, so use with caution.  Once an initial list has been built this needs
# to be set to true.  I recommend you review any whitelist created in this way
# before the domains are "blessed" as known good.
auto_add_all_domains="False"

# Use memcached for super-fast performance.  Whitelist is cached in RAM
# and distributed across multiple servers.  Note that you should consider
# the security implications of where memcache is running, especially if you run
# it on machines other than the whitetrash server.  Wherever you run it you should 
# protect it to make sure the cache cannot be accessed by any person or program
# other than whitetrash.  Firewall rules and SSH tunnels might be one way to do
# this.
use_memcached="False"

# Comma separated memcached server list.  Read security notes above.
memcache_servers="127.0.0.1:11211"

# Perform a CAPTCHA (human) test before adding a HTTP domain
CAPTCHA_HTTP = "False"
# Perform a CAPTCHA (human) test before adding a SSL domain
CAPTCHA_SSL = "False"

# Window of opportunity user has to solve the CAPTCHA in seconds
# if window is exceeded, new CAPTCHA test is presented
CAPTCHA_WINDOW_SEC = "30"

# After this number of days without a hit, the whitetrash_cleanup.py script will
# remove the domain from the database.  Note whitetrash_cleanup will have
# to be installed as a cron or run manually
timeout_in_days = 90

# Database params 
DATABASE_NAME = 'whitetrash'        
DATABASE_HOST = ''    
DATABASE_PORT = '3306'
DATABASE_UNIX_SOCKET="/var/run/mysqld/mysqld.sock"

#Django database user
DATABASE_DJANGO_USER = 'whitetrash_djan'       
DATABASE_DJANGO_PASSWORD = 'Jangl3DDjANg00'    
# Whitetrash redirector user 
DATABASE_WHITETRASH_USER = 'whitetrash_redir'
DATABASE_WHITETRASH_PASSWORD = 'SquIDR3directR'
# whitetrash_cleanup.py user
DATABASE_CLEANUP_USER = 'whitetrash_clean'
DATABASE_CLEANUP_PASSWORD = 'Cl33nThislis7'

#Set this to true to use LDAP, then change the LDAP
#settings in settings.py
LDAP_AUTH = "False"

#Disable SSL.  You shouldn't need to do this but if it is necessary
#you will also need to remove the rewrite directive in:
#/etc/apache2/sites-available/whitetrash
ssl_server_enabled = "True"

# dummy_content URL will return a 404 for content that is not whitelisted and is NOT html.
# i.e. stuff that matches the nonhtml_suffix regex.
# Typically this is jpg,gif,png or other media served off a domain that is not in the whitelist
# Use a 404 because it is quick.  
nonhtml_suffix_re=".*(jpg|gif|png|css|js|ico|swf)$"

# Domain fail indicator for redirectors.  You shouldn't need to change this.
domain_fail_string="invalid_try_again"

#Valid domain regex.  Be very careful about changing this.
# Labels 1-50 chars only a-z, digits and dash.
# 1-6 Labels
# 2-6 char suffix (everything from .uk to .museum)
domain_regex="^([a-z0-9-]{1,50}\.){1,6}[a-z]{2,6}$"

# Python logging configuration.
[loggers]
keys=root,django,squidredir

[logger_django]
level=DEBUG
handlers=whitetrashDjango
propagate=1
qualname=whitetrashDjango

[logger_squidredir]
level=DEBUG
handlers=whitetrashRedir
propagate=1
qualname=whitetrashRedir

[logger_root]
level=DEBUG
handlers=syslog

[handlers]
keys=syslog,whitetrashDjango,whitetrashRedir

# Send everything ERROR and higher to syslog
[handler_syslog]
level=ERROR
class=handlers.SysLogHandler
formatter=simpleFormatter
args=("/dev/log", handlers.SysLogHandler.LOG_USER)

# Set logging level for django
# DEBUG,INFO,WARNING,ERROR,CRITICAL
# This logfile should be owned by the apache user,
# on ubuntu this is www-data
[handler_whitetrashDjango]
level=DEBUG
class=logging.handlers.RotatingFileHandler
formatter=simpleFormatter
args=('/var/log/whitetrash.django.log','a',51200,5,None,True)

# Set logging level for squid redirector
# DEBUG,INFO,WARNING,ERROR,CRITICAL
# This logfile should be owned by the squid user,
# on ubuntu this is proxy
[handler_whitetrashRedir]
level=DEBUG
class=logging.handlers.RotatingFileHandler
formatter=simpleFormatter
args=('/var/log/whitetrash.squidredir.log','a',51200,5,None,True)

[formatters]
keys=simpleFormatter

[formatter_simpleFormatter]
format=%(asctime)s - %(name)s - %(levelname)s - %(message)s

